<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>文漫 SDK jsbridge测试</title>
    <style>
        button {
            display: block;
            margin: 20px 0;
        }
        .m-toast{position:absolute;padding:10px 40px; max-width: 66%;text-align:center; word-break: break-all;border-radius:5px;color:#fff;background-color:rgba(0,0,0,.8);-webkit-transition:opacity 0.5s;transition:opacity 0.5s;}
    </style>
</head>
<body>
    <script>document.write(navigator.userAgent);</script>
    <div>如果有NEJSBridge的字样，就表示当前页会用NEJSBridge和app交互</div>
    <h2>登录</h2>
    <button id="authorize">wmAuthorize  请求授权</button>
    
    <h2>支付相关</h2>
    <button id="recharge">wmRecharge 请求充值，传入差值</button>
    <button id="balance">wmPushBalance 推送现在账户余额</button>



    <script src="https://yuedust.yuedu.126.net/assets/mobile/js/zepto.js"></script>
    <script src="https://yuedust.yuedu.126.net/assets/mobile/activity/common/js/base.js"></script>
    <script src="https://easyread.nosdn.127.net/web/trunk/1523341087445/vconsole.min.js"></script>
    <script src="./dist/bridge.sdk.iife.js"></script>
<!--     <script src="https://easyread.nosdn.127.net/web/trunk/1522380984156/bridge.sdk.iife.js"></script>
 -->
    <script>
    $(function() {
        var vConsole = new VConsole();
        
        window.pris = window.pris || {};
        window.active = window.active || {};

        window.onerror = function(e) {
            alert(e.toString());
        };

        var ua = window.navigator.userAgent,
            isIphone = /iphone/i.test(ua);

        var callHandler = Bridge.sdk.callHandler;
        var registerHandler = Bridge.sdk.registerHandler;


        $('#authorize').on('click', function() {
            callHandler('wmAuthorize', {}, function(resp) {
                console.log(resp)
            });
        })

        $('#recharge').on('click', function() {
            callHandler('wmRecharge', {
                requiredCurrency : 30
            }, function(resp) {
                console.log(resp)
            });
        })

        $('#balance').on('click', function() {
            callHandler('wmPushBalance', {}, function(resp) {
                console.log(resp)
            });
        })

    })
    </script>
</body>
</html>
